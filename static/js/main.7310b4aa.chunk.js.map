{"version":3,"sources":["SettingsBar.tsx","storage.ts","utils/ModdedChrono.ts","tasks/TimedTask.ts","Editor.tsx","Help.tsx","Greeting.tsx","Visualization.tsx","Settings.tsx","App.tsx","index.tsx","example-img.png"],"names":["SettingsBar","react_default","a","createElement","className","wouter","href","xmlns","x","y","viewBox","d","STRINGIFIED_SAVE","JSON","stringify","type","content","attrs","level","text","marks","target","class","useSettingsStore","create","persist","set","get","isDarkmode","window","matchMedia","matches","toggleTheme","showVisualization","toggleVisualization","version","name","moddedChrono","chrono","clone","refiners","push","refine","context","results","forEach","result","hour","start","isCertain","assign","OVERDUE","DUE_TODAY","DUE_SOON","NOT_URGENT","MS_IN_DAYS","calculateUrgency","deadline","diff","getTime","Date","parseTime","parsedResults","parse","undefined","forwardDate","length","time","date","getAttributes","match","input","TimedTask","Mark","exitable","keepOnSplit","addAttributes","default","parseHTML","element","getAttribute","renderHTML","attributes","data-time","locale-string","toLocaleString","month","day","minute","innerText","uid","id","color","style","concat","addCommands","_this","this","setDue","_ref","commands","setMark","insertContent","addKeyboardShortcuts","_this2","Mod-d","editor","Mod-D","onCreate","_this3","transaction","state","tr","doc","descendants","node","pos","timeMark","find","mark","end","nodeSize","removeMark","newMark","Object","objectSpread","nanoid","addMark","setMeta","view","dispatch","onUpdate","_this4","newTime","tag","addInputRules","markInputRule","addPasteRules","markPasteRule","_ref2","HTMLAttributes","Editor","setTasks","refreshTasks","newTasks","due","oldTasks","useEditor","extensions","StarterKit","configure","heading","levels","codeBlock","blockquote","Blockquote","extend","priority","Focus","mode","Link","Placeholder","placeholder","Typography","Image","localStorage","getItem","_ref3","blocks","getJSON","setItem","dump","useEffect","updateClosure","event","storageArea","key","newValue","setContent","addEventListener","removeEventListener","insertImage","img","reader","FileReader","evt","uploaded_image","chain","focus","setImage","src","run","readAsDataURL","Fragment","tiptap_react_esm","onDrop","preventDefault","stopPropagation","fileList","dataTransfer","files","file","onPaste","clipboardData","onClick","enter","DOCS","items","wide","description","howToCreate","preview","background","exampleImg","alt","Help","map","section","item","Greeting","props","greeting","getHours","calculateGreeting","calcTime","toLocaleTimeString","_useState","useState","_useState2","slicedToArray","setTime","timer","setInterval","clearInterval","numTasks","numUrgentTasks","tasks","calculateTaskString","daysDiff","Math","max","isDueSoon","task","withSize","fgRef","useRef","isDark","show","nodes","val","pow","fg","current","d3Force","forceManyBody","strength","forceCollide","radius","sqrt","d3ReheatSimulation","paint","useCallback","ctx","fillStyle","beginPath","arc","PI","fill","src_Greeting","filter","react_force_graph_2d_module","ref","height","width","size","nodeLabel","onNodeClick","nodeEl","document","getElementById","toString","classList","add","scrollIntoView","setTimeout","remove","enablePanInteraction","enableZoomInteraction","nodeCanvasObject","graphData","links","Checkbox","toggle","checked","onChange","htmlFor","Settings","Home","src_Visualization","src_Editor_0","App","_useLocation","useLocation","location","documentElement","setAttribute","scrollTo","src_SettingsBar","path","src_Help","src_Settings","ReactDOM","createRoot","render","StrictMode","src_App","module","exports","__webpack_require__","p"],"mappings":"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","file":"static/js/main.7310b4aa.chunk.js","sourcesContent":["import React from 'react';\nimport { Link } from 'wouter';\nimport './SettingsBar.css'\n\nfunction SettingsBar() {\n  return (<div className='settings-container'>\n    <div className='settings-bar'>\n      <Link href=\"/index.html/help\">\n        <div className='settings-item helpbutton'>\n          <svg xmlns=\"http://www.w3.org/2000/svg\" x=\"0px\" y=\"0px\" viewBox=\"0 0 24 24\">\n            <path d=\"M12,2C6.477,2,2,6.477,2,12s4.477,10,10,10s10-4.477,10-10S17.523,2,12,2z M13,17h-2v-6h2V17z M13,9h-2V7h2V9z\" />\n          </svg>\n        </div>\n      </Link>\n      <Link href=\"/index.html/settings\">\n        <div className='settings-item darkmode'>\n          <svg xmlns=\"http://www.w3.org/2000/svg\" x=\"0px\" y=\"0px\" viewBox=\"0 0 24 24\">\n            <path d=\"M 10.490234 2 C 10.011234 2 9.6017656 2.3385938 9.5097656 2.8085938 L 9.1757812 4.5234375 C 8.3550224 4.8338012 7.5961042 5.2674041 6.9296875 5.8144531 L 5.2851562 5.2480469 C 4.8321563 5.0920469 4.33375 5.2793594 4.09375 5.6933594 L 2.5859375 8.3066406 C 2.3469375 8.7216406 2.4339219 9.2485 2.7949219 9.5625 L 4.1132812 10.708984 C 4.0447181 11.130337 4 11.559284 4 12 C 4 12.440716 4.0447181 12.869663 4.1132812 13.291016 L 2.7949219 14.4375 C 2.4339219 14.7515 2.3469375 15.278359 2.5859375 15.693359 L 4.09375 18.306641 C 4.33275 18.721641 4.8321562 18.908906 5.2851562 18.753906 L 6.9296875 18.1875 C 7.5958842 18.734206 8.3553934 19.166339 9.1757812 19.476562 L 9.5097656 21.191406 C 9.6017656 21.661406 10.011234 22 10.490234 22 L 13.509766 22 C 13.988766 22 14.398234 21.661406 14.490234 21.191406 L 14.824219 19.476562 C 15.644978 19.166199 16.403896 18.732596 17.070312 18.185547 L 18.714844 18.751953 C 19.167844 18.907953 19.66625 18.721641 19.90625 18.306641 L 21.414062 15.691406 C 21.653063 15.276406 21.566078 14.7515 21.205078 14.4375 L 19.886719 13.291016 C 19.955282 12.869663 20 12.440716 20 12 C 20 11.559284 19.955282 11.130337 19.886719 10.708984 L 21.205078 9.5625 C 21.566078 9.2485 21.653063 8.7216406 21.414062 8.3066406 L 19.90625 5.6933594 C 19.66725 5.2783594 19.167844 5.0910937 18.714844 5.2460938 L 17.070312 5.8125 C 16.404116 5.2657937 15.644607 4.8336609 14.824219 4.5234375 L 14.490234 2.8085938 C 14.398234 2.3385937 13.988766 2 13.509766 2 L 10.490234 2 z M 12 8 C 14.209 8 16 9.791 16 12 C 16 14.209 14.209 16 12 16 C 9.791 16 8 14.209 8 12 C 8 9.791 9.791 8 12 8 z\" />\n          </svg>\n        </div>\n      </Link>\n    </div>\n  </div>)\n}\n\nexport default SettingsBar;\n","import { JSONContent } from \"@tiptap/react\";\nimport create from 'zustand';\nimport { persist } from 'zustand/middleware'\n\ntype OutputData = JSONContent;\nconst DEFAULT_SAVE: OutputData = {\n  type: \"doc\",\n  content: [\n    {\n      type: \"heading\",\n      attrs: { \"level\": 2 },\n      content: [{ type: \"text\", text: \"🪴 Welcome to your Tabspace\" }]\n    }, {\n      type: \"paragraph\",\n      content: [{ type: \"text\", text: \"Treat this as your own little scratch space in the comfort of your new tab page. Your content is saved as you write and never leave your computer.\" }]\n    }, {\n      type: \"paragraph\",\n      content: [{ type: \"text\", \"marks\": [{ type: \"bold\" }], \"text\": \"This is your new digital home, set it up however you'd like!\" }]\n    }, {\n      type: \"heading\",\n      attrs: { \"level\": 3 },\n      content: [{ type: \"text\", \"text\": \"Getting Started\" }]\n    }, {\n      type: \"bulletList\",\n      content: [{ type: \"listItem\", content: [{ type: \"paragraph\", content: [{ type: \"text\", \"text\": \"Not sure what you can do? Check out the \" }, { type: \"text\", \"marks\": [{ type: \"bold\" }], \"text\": \"help guide\" }, { type: \"text\", \"text\": \" by clicking on the information icon in the bottom right corner.\" }] }] }]\n    }, {\n      type: \"bulletList\",\n      content: [{ type: \"listItem\", content: [{ type: \"paragraph\", content: [{ type: \"text\", \"text\": \"Delete this start text and make this page your own!\" } ] }] }]\n    }, {\n      type: \"horizontalRule\"\n    }, {\n      type: \"paragraph\",\n      content: [{ type: \"text\", \"text\": \"Found an issue or want to contribute a feature? Check out the code on \" }, { type: \"text\", \"marks\": [{ type: \"link\", \"attrs\": { \"href\": \"https://github.com/jackyzha0/tabspace\", \"target\": \"_blank\", \"class\": null } }], \"text\": \"Github!\" }]\n    }]\n}\n\nconst STRINGIFIED_SAVE = JSON.stringify(DEFAULT_SAVE);\n\nexport function load(): OutputData {\n  return JSON.parse(localStorage.getItem('blocks') || STRINGIFIED_SAVE)\n};\n\nexport function save(blocks: OutputData) {\n  localStorage.setItem('blocks', JSON.stringify(blocks));\n};\n\n// zustand related\ninterface SettingsState {\n  isDarkmode: boolean,\n  toggleTheme: () => void,\n  showVisualization: boolean,\n  toggleVisualization: () => void,\n}\n\nexport function loadDefault() {\n  return window.matchMedia('(prefers-color-scheme: light)').matches ? 'light' : 'dark'\n}\n\nexport const useSettingsStore = create<SettingsState>()(persist(\n  (set, get) => ({\n    isDarkmode: loadDefault() === 'dark',\n    toggleTheme: () => set({ isDarkmode: get().isDarkmode ? false : true }),\n    showVisualization: false,\n    toggleVisualization: () => set({ showVisualization: !get().showVisualization })\n  }),\n  {\n    version: 1,\n    name: 'settings',\n  }\n))\n\n","import * as chrono from \"chrono-node\";\nimport { ParsingContext } from \"chrono-node/dist/chrono\";\nimport { ParsingResult } from \"chrono-node/dist/results\";\n\nconst moddedChrono = chrono.casual.clone();\nmoddedChrono.refiners.push({\n  refine: (context: ParsingContext, results: ParsingResult[]) => {\n    // If there is no AM/PM (meridiem) specified,\n    // usually PM\n    results.forEach((result) => {\n      const hour = result.start.get('hour') || 0\n      if (!result.start.isCertain('meridiem') && hour >= 1 && hour <= 5) {\n        result.start.assign('meridiem', 1);\n        result.start.assign('hour', hour + 12);\n      }\n    });\n    return results;\n  },\n});\n\nexport default moddedChrono;\n","import { Mark, markPasteRule, markInputRule, ExtendedRegExpMatchArray } from '@tiptap/core'\nimport { nanoid } from 'nanoid';\nimport chrono from '../utils/ModdedChrono';\n\nexport interface TimedTaskOptions {\n  HTMLAttributes: Record<string, any>,\n}\n\nconst TRANSPARENCY = \"55\";\nconst OVERDUE = \"#ff3333\" + TRANSPARENCY;\nconst DUE_TODAY = \"#ffa333\" + TRANSPARENCY;\nconst DUE_SOON = \"#fff000\" + TRANSPARENCY;\nconst NOT_URGENT = \"#99999933\";\nexport const MS_IN_DAYS = 86400000;\n\nfunction calculateUrgency(deadline: Date) {\n  const diff = deadline.getTime() - new Date().getTime();\n  if (diff < 0) {\n    return OVERDUE;\n  } else if (diff <= MS_IN_DAYS) {\n\n    return DUE_TODAY;\n  } else if (diff <= MS_IN_DAYS * 3) {\n    return DUE_SOON;\n  } else {\n    return NOT_URGENT;\n  }\n}\n\nfunction parseTime(text: string | undefined) {\n  const parsedResults = chrono.parse(text || \"\", undefined, { forwardDate: true });\n  if (parsedResults.length > 0) {\n    const parsedTime = parsedResults[0];\n    return { time: parsedTime.start.date().getTime(), text }\n  } else {\n    return false\n  }\n}\n\nfunction getAttributes(match: ExtendedRegExpMatchArray) {\n  const text = match.input;\n  return parseTime(text);\n}\n\ndeclare module '@tiptap/core' {\n  interface Commands<ReturnType> {\n    timedTask: {\n      setDue: () => ReturnType,\n    }\n  }\n}\n\nexport const TimedTask = Mark.create({\n  name: 'timedTask',\n  exitable: true,\n  keepOnSplit: false,\n  addAttributes() {\n    return {\n      time: {\n        default: '',\n        parseHTML: element => element.getAttribute('data-time') || new Date().getTime(),\n        renderHTML: attributes => ({\n          'data-time': attributes.time,\n          'locale-string': new Date(attributes.time).toLocaleString('en-US', {\n            month: 'short',\n            day: 'numeric',\n            hour: 'numeric',\n            minute: 'numeric',\n          }),\n        })\n      },\n      text: {\n        default: '',\n        parseHTML: element => element.innerText,\n      },\n      uid: {\n        default: null,\n        renderHTML: attributes => ({\n          id: attributes.uid\n        })\n      },\n      color: {\n        default: NOT_URGENT,\n        renderHTML: attributes => ({\n          style: `background: ${attributes.color}`\n        })\n      }\n    }\n  },\n\n  addCommands() {\n    return {\n      setDue: () => ({commands}) => {\n        commands.setMark(this.name)\n        return commands.insertContent(\"due\\u00A0\")\n      }\n    }\n  },\n\n  addKeyboardShortcuts() {\n    return {\n      'Mod-d': () => this.editor.commands.setDue(),\n      'Mod-D': () => this.editor.commands.setDue(),\n    }\n  },\n\n  onCreate() {\n    const transaction = this.editor.state.tr;\n    this.editor.state.doc.descendants((node, pos) => {\n      if (node.type.name === 'text') {\n        const timeMark = node.marks.find((mark) => mark.type.name === this.name);\n        if (timeMark !== undefined) {\n          const start = pos;\n          const end = pos + node.nodeSize;\n          transaction.removeMark(start, end, timeMark);\n          const newMark = this.type.create({\n            ...timeMark.attrs,\n            text: node.text,\n            color: calculateUrgency(new Date(timeMark.attrs.time)),\n            uid: nanoid(),\n          })\n          transaction.addMark(start, end, newMark);\n        }\n      }\n    });\n\n    transaction.setMeta('addToHistory', false);\n    transaction.setMeta('preventUpdate', true);\n    this.editor.view.dispatch(transaction);\n  },\n\n  onUpdate() {\n    const transaction = this.editor.state.tr;\n    this.editor.state.doc.descendants((node, pos) => {\n      if (node.type.name === 'text') {\n        const timeMark = node.marks.find((mark) => mark.type.name === this.name);\n        if (timeMark !== undefined && node.text !== timeMark.attrs.text) {\n          const start = pos;\n          const end = pos + node.nodeSize;\n          const newTime = parseTime(node.text);\n          if (newTime) {\n            const newMark = this.type.create({\n              ...newTime,\n              uid: timeMark.attrs.uid,\n              color: calculateUrgency(new Date(newTime.time))\n            })\n            transaction.removeMark(start, end, timeMark);\n            transaction.addMark(start, end, newMark);\n          }\n        }\n      }\n    });\n\n    transaction.setMeta('addToHistory', false);\n    transaction.setMeta('preventUpdate', true);\n    this.editor.view.dispatch(transaction);\n  },\n\n  parseHTML() {\n    return [\n      {\n        tag: 'span[data-time]',\n      },\n    ]\n  },\n\n  addInputRules() {\n    return [\n      markInputRule({\n        find: /(?:\\s\\()(due\\s.+)(?:\\))/,\n        type: this.type,\n        getAttributes\n      }),\n    ]\n  },\n\n  addPasteRules() {\n    return [\n      markPasteRule({\n        find: /(?:\\s\\()(due\\s.+)(?:\\))/g,\n        type: this.type,\n        getAttributes\n      }),\n    ]\n  },\n\n  renderHTML({ HTMLAttributes }) {\n    return [\n      'span',\n      HTMLAttributes,\n      0,\n    ]\n  },\n})\n","import React, { ClipboardEventHandler, DragEvent, useEffect } from 'react';\nimport { useEditor, EditorContent } from '@tiptap/react'\nimport { Editor as TiptapEditor } from '@tiptap/core'\nimport StarterKit from '@tiptap/starter-kit'\nimport { load, save } from './storage';\nimport './Editor.css';\nimport Focus from '@tiptap/extension-focus';\nimport Typography from '@tiptap/extension-typography';\nimport Blockquote from '@tiptap/extension-blockquote';\nimport Image from '@tiptap/extension-image';\nimport { TimedTask } from './tasks/TimedTask';\nimport Placeholder from '@tiptap/extension-placeholder';\nimport Link from '@tiptap/extension-link';\n\nexport interface Tasks {\n  due: number, // JS date in milliseconds past epoch\n  uid: string,\n}\n\nexport interface IEditor {\n  setTasks: (cb: ((tasks: Tasks[]) => Tasks[])) => void,\n}\n\nconst Editor = ({ setTasks }: IEditor) => {\n  const refreshTasks = (editor: TiptapEditor) => {\n    const newTasks: Tasks[] = []\n    editor.state.doc.descendants((node) => {\n      if (node.type.name === 'text') {\n        const timeMark = node.marks.find((mark) => mark.type.name === 'timedTask');\n        if (timeMark !== undefined) {\n          newTasks.push({ due: timeMark.attrs.time, uid: timeMark.attrs.uid })\n        }\n      }\n    });\n\n    setTasks((oldTasks: Tasks[]) => {\n      if (JSON.stringify(oldTasks) !== JSON.stringify(newTasks)) {\n        return newTasks;\n      } else {\n        return oldTasks;\n      }\n    })\n  }\n\n  const editor = useEditor({\n    extensions: [\n      StarterKit.configure({\n        heading: {\n          levels: [1, 2, 3],\n        },\n        codeBlock: {\n          HTMLAttributes: {\n            class: 'highlight'\n          }\n        },\n        blockquote: false,\n      }),\n      Blockquote.extend({\n        priority: 100\n      }),\n      Focus.configure({\n        mode: 'deepest',\n      }),\n      Link,\n      Placeholder.configure({\n        placeholder: \"What's on your mind?\",\n      }),\n      Typography,\n      Image,\n      TimedTask,\n    ],\n    content: load(),\n    onCreate: ({ editor }) => refreshTasks(editor),\n    onUpdate: ({ editor }) => {\n      refreshTasks(editor);\n      save(editor.getJSON())\n    }\n  });\n\n  // @ts-ignore\n  window['tabspace'] = {\n    dump: () => editor ? editor.getJSON() : null\n  };\n\n  useEffect(() => {\n    const updateClosure = (event: StorageEvent) => {\n      if (event.storageArea !== localStorage) return;\n      if (event.key === 'blocks' && event.newValue !== null) {\n        if (editor) {\n          editor.commands.setContent(JSON.parse(event.newValue));\n          refreshTasks(editor);\n        }\n      }\n    };\n    window.addEventListener('storage', updateClosure);\n    return () => window.removeEventListener('storage', updateClosure);\n  }, [editor]);\n\n  const insertImage = (img: File) => {\n    const reader = new FileReader();\n    reader.addEventListener('load', (evt) => {\n      if (evt.target && editor) {\n        const uploaded_image = \"\" + evt.target.result;\n        editor.chain().focus().setImage({ src: uploaded_image }).run()\n      }\n    });\n    reader.readAsDataURL(img);\n  }\n\n  const handleDrop = (evt: DragEvent) => {\n    evt.preventDefault();\n    evt.stopPropagation();\n    const fileList = evt.dataTransfer.files;\n    if (fileList.length >= 1) {\n      const file = fileList[0];\n      insertImage(file);\n    }\n  }\n\n  const handlePaste: ClipboardEventHandler<HTMLInputElement> = (evt) => {\n    if (evt.clipboardData.files.length > 0) {\n      const file = evt.clipboardData.files[0];\n      insertImage(file);\n    }\n  }\n\n  const handleInsertNewline = () => {\n    if (editor) {\n      editor.commands.focus('end')\n      editor.commands.enter()\n    }\n  }\n\n  if (!editor) {\n    return null\n  }\n\n  return (\n    <>\n      <EditorContent onDrop={handleDrop} editor={editor} onPaste={handlePaste} />\n      <div className=\"newline-handle\" onClick={handleInsertNewline}>\n        <p>+ Click here to insert a new line</p>\n      </div>\n    </>\n  )\n}\n\nexport default Editor;\n","import React, { ReactElement } from 'react';\nimport { Link } from 'wouter';\nimport './Help.css'\nimport exampleImg from './example-img.png'\n\ninterface HelpItem {\n  name: string,\n  wide?: boolean,\n  description: string,\n  howToCreate: ReactElement,\n  preview: ReactElement,\n}\n\ninterface HelpSection {\n  heading: string,\n  items: HelpItem[],\n}\n\nconst DOCS: HelpSection[] = [\n  {\n    heading: \"Tasks\",\n    items: [\n      {\n        name: \"Due date\",\n        wide: true,\n        description: \"Turn a block into a task that will be highlighted depending on how soon it is due. Red corresponds to overdue, orange is due today, yellow is due within the next 3 days, and grey is any non-urgent task. It will also appear in the visualization. Works with natural language (you can specific dates and times like 'tomorrow', 'tonight', etc).\",\n        howToCreate: <>pressing ⌘D to insert a due date, or typing <code>(due TIME)</code> after your task where <code>TIME</code> is some due date</>,\n        preview: <ul>\n          <li>Assignment 1 <span data-time locale-string=\"Sept 25, 12:00 PM\" style={{ background: \"#ff333355\" }}>due sept 25 at noon</span></li>\n          <li>Assignment 2 <span data-time locale-string=\"Sept 27, 8:00 PM\" style={{ background: \"#ffa33355\" }}>due tomorrow night</span></li>\n          <li>Essay 2 <span data-time locale-string=\"Sept 28, 12:00 PM\" style={{ background: \"#fff00055\" }}>due in two days</span></li>\n          <li>Midterm <span data-time locale-string=\"Oct 1, 12:15 PM\" style={{ background: \"#99999933\" }}>due oct 1</span></li>\n        </ul>,\n      },\n    ],\n  },\n  {\n    heading: \"Lists\",\n    items: [\n      {\n        name: \"Numbered List\",\n        description: \"A list that counts the number of items it contains.\",\n        howToCreate: <>typing <code>1.</code> followed by a space.</>,\n        preview: <ol>\n          <li>Item 1</li>\n          <li>Item 2\n            <ol>\n              <li>Item 2.1</li>\n            </ol>\n          </li>\n        </ol>\n      },\n      {\n        name: \"Bulleted List\",\n        description: \"A regular bulleted list.\",\n        howToCreate: <>typing a dash <code>-</code> followed by a space.</>,\n        preview: <ul>\n          <li>Item 1</li>\n          <li>Item 2\n            <ul>\n              <li>Item 2.1</li>\n            </ul>\n          </li>\n        </ul>\n      }\n    ],\n  },\n  {\n    heading: \"Headers\",\n    items: [\n      {\n        name: \"Title\",\n        description: \"Equivalent to an H1. Each header takes up a full line.\",\n        howToCreate: <>typing <code>#</code> followed by a space.</>,\n        preview: <div><h1>Header</h1><p>Lorem ipsum</p></div>\n      },\n      {\n        name: \"Sub-heading\",\n        description: \"Slightly smaller than a title. Equivalent to an H2\",\n        howToCreate: <>typing <code>##</code> followed by a space.</>,\n        preview: <div><h2>Header</h2><p>Lorem ipsum</p></div>\n      }, {\n        name: \"Sub-sub-heading\",\n        description: \"An even smaller heading. Equivalent to an H3\",\n        howToCreate: <>typing <code>###</code> followed by a space.</>,\n        preview: <div><h3>Header</h3><p>Lorem ipsum</p></div>\n      }\n    ],\n  },\n  {\n    heading: \"Text formatting\",\n    items: [\n      {\n        name: \"Bold\",\n        description: \"\",\n        howToCreate: <>selecting some text then pressing ⌘B</>,\n        preview: <p>Some text with a <strong>bold portion</strong></p>,\n      },\n      {\n        name: \"Italics\",\n        description: \"\",\n        howToCreate: <>selecting some text then pressing ⌘I</>,\n        preview: <p>Some text with an <em>italicized portion</em></p>,\n      },\n      {\n        name: \"Strikethrough\",\n        description: \"\",\n        howToCreate: <>selecting some text then pressing ⌘⇧X</>,\n        preview: <p>Some text with portions <s>removed</s></p>,\n      },\n      {\n        name: \"Code\",\n        description: \"Display some inline code. Code in Tabspace is not formatted.\",\n        howToCreate: <>selecting some text then pressing ⌘E</>,\n        preview: <p>Some text with inline code: <code>print(\"Hello world\")</code></p>,\n      },\n      {\n        name: \"Blockquote\",\n        description: \"An extended quotation or excerpt, good for making callouts.\",\n        howToCreate: <>selecting some text then pressing ⌘⇧B</>,\n        preview: <blockquote><p>You can nest other formatting like <strong>bold</strong> or headers</p></blockquote>,\n      },\n    ],\n  },\n  {\n    heading: \"Miscellaneous\",\n    items: [\n      {\n        name: \"Images\",\n        description: \"Images are stored in local storage so there may be a cap on number of images you can include.\",\n        howToCreate: <>either dragging and dropping an image into the page or pasting an image directly</>,\n        preview: <><p>Here's an image</p><img src={`.${exampleImg}`} alt=\"Example\" /></>\n      },\n      {\n        name: \"Horizontal Rule\",\n        description: \"A horizontal divider to seperate content.\",\n        howToCreate: <>typing <code>---</code> followed by pressing Enter.</>,\n        preview: <p>Some text <hr /> Woah! There's a break</p>\n      }\n    ],\n  }\n]\n\nfunction Help() {\n  return (<div className=\"help\">\n    <Link href=\"/index.html\"><h2 className=\"back\">← Back</h2></Link>\n    <p>Below is a list of all the notable supported keyboard shortcuts.</p>\n    {DOCS.map(section => (<div className=\"section\">\n      <hr />\n      <h2>{section.heading}</h2>\n      <div className=\"item-container\">\n        {section.items.map(item => (<div className={`item ${item.wide ? 'wide' : ''}`}>\n          <h3>{item.name}</h3>\n          <p>{item.description} Create by {item.howToCreate}</p>\n          <div className=\"preview\">{item.preview}</div>\n        </div>))}\n      </div>\n    </div>))}\n  </div>\n  )\n}\n\nexport default Help\n","import React, { useEffect, useState } from 'react';\nimport './Greeting.css';\n\ninterface IGreeting {\n  numTasks: number,\n  numUrgentTasks: number,\n}\n\nfunction calculateGreeting() {\n  const hour = new Date().getHours();\n  if (hour < 12) {\n    return \"Good morning\"\n  } else if (hour < 18) {\n    return \"Good afternoon\"\n  } else {\n    return \"Good evening\"\n  }\n}\n\nfunction calculateTaskString(numTasks: number, numUrgentTasks: number) {\n  if (numTasks === 0) {\n    return \"You have nothing due.\"\n  }\n  const tasks = numTasks === 1 ? 'task' : 'tasks'\n  return `You have ${numTasks} ${tasks} due, ${numUrgentTasks} of which need to be done soon.`\n}\n\nfunction Greeting(props: IGreeting) {\n  const greeting = calculateGreeting();\n  const calcTime = () => new Date().toLocaleTimeString(undefined, { hour: \"numeric\", minute: \"numeric\"});\n  const [time, setTime] = useState(calcTime());\n\n  useEffect(() => {\n    const timer = setInterval(() => setTime(calcTime()), 1000)\n    return () => clearInterval(timer)\n  }, [])\n\n  return (<div className=\"overlay\">\n    <h1>{time}</h1>\n    <p>{greeting}. {calculateTaskString(props.numTasks, props.numUrgentTasks)}</p>\n  </div>)\n}\n\nexport default Greeting\n","import React, { useCallback, useEffect, useRef } from 'react'\nimport { forceCollide, forceManyBody } from 'd3-force'\nimport ForceGraph2D, { ForceGraphMethods } from 'react-force-graph-2d';\nimport { Tasks } from './Editor';\nimport { MS_IN_DAYS } from './tasks/TimedTask';\nimport { withSize } from 'react-sizeme';\nimport Greeting from './Greeting';\nimport './Visualization.css'\nimport { useSettingsStore } from './storage';\n\nexport interface IVisualization {\n  tasks: Tasks[],\n  size: {\n    width: number,\n    height: number,\n  }\n}\n\nfunction daysDiff(date: number) {\n  return Math.max(0, date - (new Date().getTime())) / MS_IN_DAYS\n}\n\nfunction dateToSize(date: number) {\n  return 29 * Math.pow(1.5, -daysDiff(date)) + 1\n}\n\nfunction isDueSoon(task: Tasks) {\n  return daysDiff(task.due) < 3\n\n}\n\nfunction Visualization(props: IVisualization) {\n  const fgRef = useRef<ForceGraphMethods>();\n  const isDark = useSettingsStore(state => state.isDarkmode);\n  const show = useSettingsStore(state => state.showVisualization);\n  const nodes = props.tasks.map(task => ({\n    id: task.uid,\n    val: dateToSize(task.due)\n  }))\n\n  useEffect(() => {\n    const fg = fgRef.current;\n    if (fg) {\n      fg.d3Force('charge', forceManyBody().strength(15));\n      // @ts-ignore\n      fg.d3Force('collide', forceCollide().radius(node => 4 * Math.sqrt(node.val)));\n      fg.d3ReheatSimulation();\n    }\n  }, [fgRef.current]);\n\n  // @ts-ignore\n  const paint = useCallback((node, ctx) => {\n    ctx.fillStyle = isDark ? \"#444444\" : \"#cacaca\";\n    ctx.beginPath();\n    ctx.arc(node.x, node.y, 4 * Math.sqrt(node.val), 0, 2 * Math.PI, false);\n    ctx.fill();\n  }, [isDark])\n\n  if (!show) {\n    return <div className=\"spacer\"></div>;\n  }\n\n  return <div className=\"visualization\">\n    <Greeting numTasks={props.tasks.length} numUrgentTasks={props.tasks.filter(isDueSoon).length} />\n    <ForceGraph2D\n      ref={fgRef}\n      height={300}\n      width={props.size.width}\n      nodeLabel=\"\"\n      onNodeClick={(node) => {\n        const nodeEl = document.getElementById((node.id || \"\").toString());\n        if (nodeEl) {\n          nodeEl.classList.add(\"highlight\");\n          nodeEl.scrollIntoView();\n          setTimeout(() => nodeEl.classList.remove(\"highlight\"), 800);\n        }\n      }}\n      enablePanInteraction={false}\n      enableZoomInteraction={false}\n      nodeCanvasObject={paint}\n      graphData={{ nodes, links: [] }}\n    />\n  </div>\n}\n\nexport default withSize()(Visualization);\n","import React from 'react'\nimport { Link } from 'wouter'\nimport { useSettingsStore } from './storage';\nimport './Settings.css'\n\ninterface ICheckbox {\n  state: boolean,\n  toggle: () => void,\n  name: string,\n  description: string,\n}\n\nfunction Checkbox({ name, state, toggle, description }: ICheckbox) {\n  return (<div className=\"config-item\">\n    <input id={name} type=\"checkbox\" checked={state} onChange={toggle} />\n    <label htmlFor={name} />\n    <div className=\"desc\">\n      <h3>{name}</h3>\n      <p>{description}</p>\n    </div>\n  </div>)\n\n}\n\nfunction Settings() {\n  const state = useSettingsStore();\n  return (<div className=\"help\">\n    <Link href=\"/index.html\"><h2 className=\"back\">← Back</h2></Link>\n    <p>Configure Tabspace to your liking.</p>\n    <hr />\n    <div className=\"config-items\">\n      <Checkbox state={state.isDarkmode} toggle={state.toggleTheme} name=\"Dark theme\" description=\"Change the colour theme of TabSpace. Checking this box will set it to Dark mode.\" />\n      <Checkbox state={state.showVisualization} toggle={state.toggleVisualization} name=\"Show task visualization\" description=\"Adds a task visualization widget to the top of your notes page. It visualized your due dates by representing the urgency of tasks through the size of blobs.\" />\n    </div>\n  </div>\n  )\n}\n\nexport default Settings\n","import React, { useEffect, useState } from 'react';\nimport { Route, Switch, useLocation } from 'wouter';\nimport './App.css';\nimport SettingsBar from './SettingsBar';\nimport Editor, { IEditor, Tasks } from './Editor';\nimport Help from './Help';\nimport Visualization, { IVisualization } from './Visualization';\nimport { useSettingsStore } from './storage';\nimport Settings from './Settings';\n\n\nfunction App() {\n  const [location] = useLocation();\n  const [tasks, setTasks] = useState<Tasks[]>([]);\n\n  const isDarkmode = useSettingsStore(state => state.isDarkmode);\n  useEffect(() => {\n    document.documentElement.setAttribute('saved-theme', isDarkmode ? 'dark' : 'light');\n  }, [isDarkmode])\n\n  useEffect(() => {\n    window.scrollTo(0, 0);\n  }, [location]);\n\n  return (\n    <div className=\"App\">\n      <SettingsBar />\n      <div className=\"App-content\">\n        <Switch>\n          <Route path=\"/index.html/help\">\n            <Help />\n          </Route>\n          <Route path=\"/index.html/settings\">\n            <Settings />\n          </Route>\n          <Route path=\"/index.html\">\n            <Home tasks={tasks} setTasks={setTasks} />\n          </Route>\n        </Switch>\n      </div>\n    </div>\n  );\n}\n\ntype IHome = Pick<IVisualization & IEditor, 'tasks' | 'setTasks'>;\nfunction Home({ tasks, setTasks }: IHome) {\n  return (<div>\n    <Visualization tasks={tasks} />\n    <Editor setTasks={setTasks} />\n  </div>)\n}\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom/client';\nimport './index.css';\nimport App from './App';\n\nconst root = ReactDOM.createRoot(\n  document.getElementById('root') as HTMLElement\n);\n\nroot.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>\n);\n\n","module.exports = __webpack_public_path__ + \"static/media/example-img.df6899ce.png\";"],"sourceRoot":""}